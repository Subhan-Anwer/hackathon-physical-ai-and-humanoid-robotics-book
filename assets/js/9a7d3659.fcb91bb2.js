"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[4133],{1870(e,n,i){i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"module-2-digital-twin/labs/lab-2-gazebo-environment-setup","title":"Lab 2: Gazebo Environment Setup","description":"Overview","source":"@site/docs/module-2-digital-twin/labs/lab-2-gazebo-environment-setup.md","sourceDirName":"module-2-digital-twin/labs","slug":"/module-2-digital-twin/labs/lab-2-gazebo-environment-setup","permalink":"/hackathon-physical-ai-and-humanoid-robotics-book/docs/module-2-digital-twin/labs/lab-2-gazebo-environment-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/subhan-anwer/hackathon-physical-ai-and-humanoid-robotics-book/docs/module-2-digital-twin/labs/lab-2-gazebo-environment-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Lab 2: Gazebo Environment Setup","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Lab 1: Digital Twin Fundamentals","permalink":"/hackathon-physical-ai-and-humanoid-robotics-book/docs/module-2-digital-twin/labs/lab-1-digital-twin-fundamentals"},"next":{"title":"Lab 3: Robot Modeling with URDF","permalink":"/hackathon-physical-ai-and-humanoid-robotics-book/docs/module-2-digital-twin/labs/lab-3-robot-modeling-with-urdf"}}');var o=i(4848),t=i(8453);const l={title:"Lab 2: Gazebo Environment Setup",sidebar_position:2},r="Lab 2: Gazebo Environment Setup",s={},d=[{value:"Overview",id:"overview",level:2},{value:"Objectives",id:"objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Lab Setup",id:"lab-setup",level:2},{value:"Implementation Steps",id:"implementation-steps",level:2},{value:"Step 1: Verify Installation",id:"step-1-verify-installation",level:3},{value:"Step 2: Create World File",id:"step-2-create-world-file",level:3},{value:"Step 3: Create Differential Drive Robot Model",id:"step-3-create-differential-drive-robot-model",level:3},{value:"Step 4: Create Launch File",id:"step-4-create-launch-file",level:3},{value:"Step 5: Launch and Test",id:"step-5-launch-and-test",level:3},{value:"Sensor Data Acquisition",id:"sensor-data-acquisition",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"What You Learned",id:"what-you-learned",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"lab-2-gazebo-environment-setup",children:"Lab 2: Gazebo Environment Setup"})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"This lab focuses on setting up a complete Gazebo simulation environment with ROS 2 integration, including world creation, robot spawning, and sensor configuration."}),"\n",(0,o.jsx)(n.h2,{id:"objectives",children:"Objectives"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Install and configure Gazebo with ROS 2"}),"\n",(0,o.jsx)(n.li,{children:"Create a basic simulation world with obstacles"}),"\n",(0,o.jsx)(n.li,{children:"Spawn and control a differential drive robot"}),"\n",(0,o.jsx)(n.li,{children:"Implement sensor data acquisition from simulated robot"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"ROS 2 installation (Humble Hawksbill or later)"}),"\n",(0,o.jsx)(n.li,{children:"Gazebo Garden or compatible version"}),"\n",(0,o.jsx)(n.li,{children:"Basic knowledge of ROS 2 commands and concepts"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"lab-setup",children:"Lab Setup"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Verify Gazebo and ROS 2 installation"}),"\n",(0,o.jsx)(n.li,{children:"Create a new ROS 2 package for the simulation"}),"\n",(0,o.jsx)(n.li,{children:"Set up the necessary configuration files"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"implementation-steps",children:"Implementation Steps"}),"\n",(0,o.jsx)(n.h3,{id:"step-1-verify-installation",children:"Step 1: Verify Installation"}),"\n",(0,o.jsx)(n.p,{children:"Check that Gazebo and ROS 2 integration packages are installed:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Check Gazebo version\ngazebo --version\n\n# Check ROS 2 packages\nros2 pkg list | grep gazebo\n"})}),"\n",(0,o.jsx)(n.p,{children:"If packages are missing, install them:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install ros-humble-gazebo-ros-pkgs ros-humble-gazebo-plugins\nsudo apt install ros-humble-gazebo-dev\n"})}),"\n",(0,o.jsx)(n.h3,{id:"step-2-create-world-file",children:"Step 2: Create World File"}),"\n",(0,o.jsxs)(n.p,{children:["Create a custom world file with obstacles and environmental features. Create ",(0,o.jsx)(n.code,{children:"worlds/simple_world.world"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_world">\n    \x3c!-- Include ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    \x3c!-- Include sun --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n\n    \x3c!-- Add obstacles --\x3e\n    <model name="wall_1">\n      <pose>-3 0 0 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box><size>0.1 6 2</size></box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box><size>0.1 6 2</size></box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.1 0.1 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    <model name="wall_2">\n      <pose>3 0 0 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box><size>0.1 6 2</size></box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box><size>0.1 6 2</size></box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.1 0.1 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    <model name="obstacle_box">\n      <pose>0 2 0.5 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box><size>1 1 1</size></box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box><size>1 1 1</size></box>\n          </geometry>\n          <material>\n            <ambient>0.2 0.8 0.2 1</ambient>\n            <diffuse>0.2 0.8 0.2 1</diffuse>\n            <specular>0.1 0.1 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    <model name="table">\n      <pose>-1 -2 0.5 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box><size>1.5 1 0.8</size></box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box><size>1.5 1 0.8</size></box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.6 0.2 1</ambient>\n            <diffuse>0.8 0.6 0.2 1</diffuse>\n            <specular>0.1 0.1 0.1 1</specular>\n          </material>\n        </visual>\n      </link>\n    </model>\n  </world>\n</sdf>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"step-3-create-differential-drive-robot-model",children:"Step 3: Create Differential Drive Robot Model"}),"\n",(0,o.jsxs)(n.p,{children:["Create a simple differential drive robot URDF file. Create ",(0,o.jsx)(n.code,{children:"urdf/diff_drive_robot.urdf"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="diff_drive_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Base link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.2" radius="0.2"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 0.8"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.2" radius="0.2"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="10"/>\n      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Left wheel --\x3e\n  <joint name="left_wheel_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="left_wheel"/>\n    <origin xyz="0 0.2 -0.1" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n  </joint>\n\n  <link name="left_wheel">\n    <visual>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 0.8"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Right wheel --\x3e\n  <joint name="right_wheel_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="right_wheel"/>\n    <origin xyz="0 -0.2 -0.1" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n  </joint>\n\n  <link name="right_wheel">\n    <visual>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n      <material name="black"/>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Camera sensor --\x3e\n  <joint name="camera_joint" type="fixed">\n    <parent link="base_link"/>\n    <child link="camera_link"/>\n    <origin xyz="0.15 0 0.05" rpy="0 0 0"/>\n  </joint>\n\n  <link name="camera_link">\n    <visual>\n      <geometry>\n        <box size="0.02 0.08 0.04"/>\n      </geometry>\n      <material name="black"/>\n    </visual>\n  </link>\n\n  \x3c!-- Gazebo plugin for differential drive --\x3e\n  <gazebo>\n    <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\n      <left_joint>left_wheel_joint</left_joint>\n      <right_joint>right_wheel_joint</right_joint>\n      <wheel_separation>0.4</wheel_separation>\n      <wheel_diameter>0.2</wheel_diameter>\n      <max_wheel_torque>20</max_wheel_torque>\n      <max_wheel_acceleration>1.0</max_wheel_acceleration>\n      <command_topic>cmd_vel</command_topic>\n      <odometry_topic>odom</odometry_topic>\n      <odometry_frame>odom</odometry_frame>\n      <robot_base_frame>base_footprint</robot_base_frame>\n      <publish_odom>true</publish_odom>\n      <publish_wheel_tf>true</publish_wheel_tf>\n      <publish_odom_tf>true</publish_odom_tf>\n    </plugin>\n  </gazebo>\n\n  \x3c!-- Gazebo plugin for camera --\x3e\n  <gazebo reference="camera_link">\n    <sensor type="camera" name="camera_sensor">\n      <update_rate>30</update_rate>\n      <camera name="head">\n        <horizontal_fov>1.3962634</horizontal_fov>\n        <image>\n          <width>640</width>\n          <height>480</height>\n          <format>R8G8B8</format>\n        </image>\n        <clip>\n          <near>0.1</near>\n          <far>100</far>\n        </clip>\n      </camera>\n      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n        <frame_name>camera_link</frame_name>\n        <topic_name>image_raw</topic_name>\n      </plugin>\n    </sensor>\n  </gazebo>\n</robot>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"step-4-create-launch-file",children:"Step 4: Create Launch File"}),"\n",(0,o.jsx)(n.p,{children:"Create a launch file to start Gazebo with the custom world and spawn the robot:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    pkg_gazebo_ros = FindPackageShare('gazebo_ros')\n\n    # Gazebo launch\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(\n            PathJoinSubstitution([pkg_gazebo_ros, 'launch', 'gazebo.launch.py'])\n        ),\n        launch_arguments={\n            'world': PathJoinSubstitution([FindPackageShare('your_package_name'), 'worlds', 'simple_world.world']),\n            'verbose': 'true'\n        }.items()\n    )\n\n    # Robot state publisher\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        name='robot_state_publisher',\n        parameters=[{\n            'robot_description': open('urdf/diff_drive_robot.urdf', 'r').read()\n        }]\n    )\n\n    # Spawn entity\n    spawn_entity = Node(\n        package='gazebo_ros',\n        executable='spawn_entity.py',\n        arguments=[\n            '-topic', 'robot_description',\n            '-entity', 'diff_drive_robot',\n            '-x', '0.0',\n            '-y', '0.0',\n            '-z', '0.2'\n        ],\n        output='screen'\n    )\n\n    return LaunchDescription([\n        gazebo,\n        robot_state_publisher,\n        spawn_entity\n    ])\n"})}),"\n",(0,o.jsx)(n.h3,{id:"step-5-launch-and-test",children:"Step 5: Launch and Test"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Launch the simulation:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 launch your_package_name launch_simulation.py\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"Control the robot using teleop:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Install teleop_twist_keyboard if not already installed\nsudo apt install ros-humble-teleop-twist-keyboard\n\n# Run teleop\nros2 run teleop_twist_keyboard teleop_twist_keyboard\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"Check sensor topics:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# List available topics\nros2 topic list\n\n# Check camera data\nros2 topic echo /image_raw --field data\n\n# Check odometry data\nros2 topic echo /odom\n"})}),"\n",(0,o.jsx)(n.h2,{id:"sensor-data-acquisition",children:"Sensor Data Acquisition"}),"\n",(0,o.jsx)(n.p,{children:"Monitor the sensor data from the simulated robot:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Monitor camera feed\nrqt_image_view\n\n# Monitor laser scan (if added)\nrqt_plot /scan/ranges[0]\n\n# Monitor odometry\nrviz2\n"})}),"\n",(0,o.jsx)(n.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"How does the wheel separation parameter affect the robot's turning behavior?"}),"\n",(0,o.jsx)(n.li,{children:"What are the differences between the simulated sensors and real sensors?"}),"\n",(0,o.jsx)(n.li,{children:"How would you add additional sensors to the robot model?"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"what-you-learned",children:"What You Learned"}),"\n",(0,o.jsx)(n.p,{children:"In this lab, you learned how to set up a complete Gazebo simulation environment with custom worlds, robot models, and sensor configurations. You practiced creating URDF files with Gazebo plugins and launching complex simulation scenarios with ROS 2 integration."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>r});var a=i(6540);const o={},t=a.createContext(o);function l(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);